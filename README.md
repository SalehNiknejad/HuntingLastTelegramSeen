# üì° HuntingLastTelegramSeen

A Python-based toolset that monitors the **online status (Last Seen)** of specific Telegram users, stores their activity logs, and provides a **beautiful dashboard** to visualize and analyze their status changes over time.

---

## üöÄ Features

### ü§ñ Telegram Bot (`hunter.py`)

- üîç Monitors multiple Telegram users using Telethon
- üîî Sends live status updates (online/offline) to a group or channel
- üïπÔ∏è Start/Stop the bot remotely via Telegram commands
- ‚ûï Add/remove users dynamically via Telegram
- üîá Supports silent mode per user (no notification)
- üè∑Ô∏è Allows assigning aliases for clarity
- ‚è±Ô∏è `setinterval` to change check frequency (in seconds)
- üîÅ `status` to check current bot status (running/stopped + interval)
- üßπ `clearlog` to wipe log file instantly from Telegram
- ‚ÑπÔ∏è `info` to see latest status of all tracked users
- üìù Logs all status changes to `status_log.json`
- üîí Uses `.env` and `users.json` for safe config management

### üìä Streamlit Dashboard (`dashboard.py`)

- üìà Real-time charts of status changes over time
- üïí Shows most recent status & timestamp
- üìã Interactive full table of logs
- üìä Status frequency statistics
- üíæ Export logs as `.txt` file
- üßπ One-click to clear all logs

---

## üì¶ Requirements

- ‚úÖ Python 3.8 or higher
- üí¨ Telegram API credentials from [my.telegram.org](https://my.telegram.org)
- üí° A group or channel to receive bot updates
- üì¶ Dependencies (install via `pip install -r requirements.txt`)

---

## üîß Setup Instructions

### 1. Clone the Repository

```bash
git clone https://github.com/SalehNiknejad/HuntingLastTelegramSeen.git
cd HuntingLastTelegramSeen
```

### 2. Install Python Dependencies

```bash
pip install -r requirements.txt
```

### 3. Bot Configuration

Create a `.env` file based on the provided template:

```env
API_ID=your_api_id
API_HASH=your_api_hash
TARGET_CHAT_ID=@your_channel_or_group
ADMIN_USERNAME=your_telegram_username_without_@
```

Create a `users.json` file using `users.example.json`:

```json
[
  {
    "username": "example_user",
    "alias": "Ali",
    "silent": false
  }
]
```

Then start the bot:

```bash
python hunter.py
```

---

## üí¨ Available Bot Commands

All commands are sent via Telegram messages to the bot (only by admin):

| Command                        | Description                                 |
| ------------------------------ | ------------------------------------------- |
| `start`                        | Start the monitoring loop                   |
| `stop`                         | Pause monitoring                            |
| `log`                          | Get the full status log file                |
| `users`                        | See current user list with aliases          |
| `adduser alias username_or_id` | Add a new user to track                     |
| `deluser index`                | Remove user by index (from `users` list)    |
| `status`                       | Get bot running status and current interval |
| `setinterval N`                | Change interval to N seconds                |
| `clearlog`                     | Deletes `status_log.json` content           |
| `info`                         | Shows current status of all tracked users   |
| `help`                         | Displays help and usage guide               |

---

## üìä Dashboard Usage

To visualize the logs, run the Streamlit dashboard:

```bash
streamlit run dashboard.py
```

You can:

- Select a user alias to filter
- See latest status and full chart
- Export logs to `.txt`
- Wipe all logs easily
- View status distribution

> ‚ö†Ô∏è The dashboard reads from `status_log.json` generated by the bot.

---

## üóÇÔ∏è Example Log Format

```json
[
  {
    "time": "2025-06-07T10:20:15",
    "username": "AliA1",
    "alias": "Ali",
    "status": "UserStatusOnline"
  },
  {
    "time": "2025-06-07T10:24:10",
    "username": "AliA1",
    "alias": "Ali",
    "status": "UserStatusOffline"
  }
]
```

---

## üõ° Security

- `.env` is in `.gitignore` to protect secrets.
- Share only `.env.example` and `users.example.json` with others.
- Never expose your API credentials.

---

## üñã Font Customization (Dashboard)

You can change the font used in the Streamlit app by editing the configuration file located in the `.streamlit` folder, typically `.streamlit/config.toml`.

By default, the app uses the **Vazir** font (a popular Persian font). To use this font correctly, make sure you have it installed on your system. If not, you can download it from [this link](https://github.com/rastikerdar/vazir-font).

To change the font, open `.streamlit/config.toml` and modify or add the following line under the `[theme]` section:

```toml
[theme]
font = "Your Desired Font Name"
```

Replace `"Your Desired Font Name"` with the exact name of the font installed on your system.

After saving changes, restart the Streamlit app to see the new font applied.
